<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Vue Tree pour les commentaires -->
    <record id="view_workflow_request_comment_tree" model="ir.ui.view">
        <field name="name">workflow.request.comment.tree</field>
        <field name="model">workflow.request.comment</field>
        <field name="arch" type="xml">
            <tree string="Commentaires" 
                  create="0" 
                  edit="0" 
                  delete="0"
                  decoration-info="comment_type == 'approval_note'"
                  decoration-danger="comment_type == 'rejection_reason'"
                  decoration-warning="comment_type == 'return'">
                
                <field name="comment_type" column_invisible="1"/>
                <field name="create_date" string="Date" widget="datetime"/>
                
                <field name="user_id" string="Auteur" widget="many2one_avatar_user"/>
                
                <field name="approval_id" string="Niveau" 
                       widget="badge"
                       optional="show"/>
                
                <field name="message" string="Commentaire"/>
                
            </tree>
        </field>
    </record>

    <!-- Vue Form pour les commentaires -->
    <record id="view_workflow_request_comment_form" model="ir.ui.view">
        <field name="name">workflow.request.comment.form</field>
        <field name="model">workflow.request.comment</field>
        <field name="arch" type="xml">
            <form string="Commentaire">
                <sheet>
                    <group>
                        <group>
                            <field name="create_date" string="Date" readonly="1"/>
                            <field name="user_id" string="Auteur" readonly="1"/>
                            <field name="approval_id" string="Niveau d'approbation" readonly="1"/>
                        </group>
                        <group>
                            <field name="comment_type" string="Type de commentaire" readonly="1"/>
                            <field name="request_id" readonly="1"/>
                        </group>
                    </group>
                    
                    <group string="Message">
                        <field name="message" nolabel="1" readonly="1" widget="text"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

</odoo>
